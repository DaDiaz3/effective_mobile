# üîê Effective Mobile ‚Äî Backend Test Task

Backend-—Å–µ—Ä–≤–∏—Å –Ω–∞ Django —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π **JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** –∏ **RBAC (Role-Based Access Control)**.

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–¥—Ö–æ–¥ –∫ –∑–∞—â–∏—Ç–µ API, —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—é –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π backend-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.  
–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ backend-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–æ—Å—Ç—É–ø–∞.

---

## üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ **JWT access token**  
- –ö–∞—Å—Ç–æ–º–Ω—ã–π **JWT middleware**  
- –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ **—Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ (RBAC)**  
- –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ `401 / 403 / 200`  
- Mock –±–∏–∑–Ω–µ—Å-—Ä–µ—Å—É—Ä—Å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏  

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.10  
- Django 5  
- Django REST Framework  
- PostgreSQL  
- JWT (PyJWT)  
- Docker / docker-compose  

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/DaDiaz3/effective_mobile.git
cd effective_mobile
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv .venv
.venv\Scripts\activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
DEBUG=1
SECRET_KEY=django-secret
JWT_SECRET=super-long-secret-key-change-me-1234567890
JWT_ALG=HS256
JWT_TTL_MIN=60
```

### 5. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
python manage.py migrate
```

### 6. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è RBAC

```bash
python manage.py seed_rbac
```

### 7. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python manage.py runserver
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://127.0.0.1:8000/
```

---

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```http
POST /auth/register/
```

### –õ–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```http
POST /auth/login/
```

–í –æ—Ç–≤–µ—Ç–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `access_token`.

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```http
GET /auth/me/
Authorization: Bearer <token>
```

---

## üß† –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (RBAC)

RBAC —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏ –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏:

- **Role** ‚Äî —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin, viewer –∏ —Ç.–¥.)
- **BusinessElement** ‚Äî –∑–∞—â–∏—â–∞–µ–º—ã–π –±–∏–∑–Ω–µ—Å-—Ä–µ—Å—É—Ä—Å
- **AccessRule** ‚Äî –ø—Ä–∞–≤–∏–ª–æ –¥–æ—Å—Ç—É–ø–∞ (—Ä–æ–ª—å + —Ä–µ—Å—É—Ä—Å + –¥–µ–π—Å—Ç–≤–∏–µ)
- **UserRole** ‚Äî —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

- JWT middleware –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ access token  
- RBACPermission –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
  - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å  
  - –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –ª–∏ —Ä–æ–ª—å  
  - —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞–¥ —Ä–µ—Å—É—Ä—Å–æ–º  

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `401 / 403 / 200`.

---

## üìÇ –ü—Ä–∏–º–µ—Ä –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞

```http
GET /api/documents/
Authorization: Bearer <token>
```

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ

| –°—Ü–µ–Ω–∞—Ä–∏–π | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|--------|----------|
| –ë–µ–∑ —Ç–æ–∫–µ–Ω–∞ | 401 / 403 |
| –° —Ç–æ–∫–µ–Ω–æ–º –±–µ–∑ —Ä–æ–ª–∏ | 403 Forbidden |
| –° —Ç–æ–∫–µ–Ω–æ–º –∏ —Ä–æ–ª—å—é admin | 200 OK |

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞

```json
[
  { "id": 1, "title": "Mock Document 1" },
  { "id": 2, "title": "Mock Document 2" }
]
```

---

## üë§ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–ø—Ä–∏–º–µ—Ä)

```bash
python manage.py shell
```

```python
from apps.accounts.models import User
from apps.rbac.models import Role, UserRole

user = User.objects.get(email="test2@test.com")
admin_role = Role.objects.get(slug="admin")

UserRole.objects.get_or_create(user=user, role=admin_role)
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
effective_mobile/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ accounts/        # —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, JWT
‚îÇ   ‚îî‚îÄ‚îÄ rbac/            # —Ä–æ–ª–∏, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
‚îú‚îÄ‚îÄ config/              # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ manage.py
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

---

## üìù –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`apps.accounts.User`)
- JWT —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ middleware, –±–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö DRF authentication classes
- RBAC –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `/api/documents/` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ mock-—Ä–µ—Å—É—Ä—Å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –ø–æ–¥ –Ω–æ–≤—ã–µ —Ä–æ–ª–∏ –∏ –±–∏–∑–Ω–µ—Å-—Ä–µ—Å—É—Ä—Å—ã

---

## ‚úÖ –ò—Ç–æ–≥

–í —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:

- JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
- middleware-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è  
- RBAC —Å —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞  
- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `401 / 403 / 200`
